--- openbabel-2.3.1/scripts/CMakeLists.txt.orig	2012-11-05 15:36:59.273026705 +0800
+++ openbabel-2.3.1/scripts/CMakeLists.txt	2012-11-05 15:57:35.914601635 +0800
@@ -311,14 +311,14 @@
         # no regex metacharacters except possibly '.':
         string(REGEX REPLACE ^${RUBY_POSSIBLE_LIB_DIR}/ruby ${RUBY_PREFIX} ruby_install_dir "${RUBY_SITEARCH_DIR}")
       else (RUBY_PREFIX)
-        execute_process(COMMAND ${RUBY_EXECUTABLE} -r rbconfig -e "print Config::CONFIG['exec_prefix']"
+        execute_process(COMMAND ${RUBY_EXECUTABLE} -r rbconfig -e "print RbConfig::CONFIG['exec_prefix']"
           OUTPUT_VARIABLE ruby_exec_prefix)
         # It is reasonably safe to assume that ruby_exec_prefix contains no
         # regex metacharacters except possibly '.':
         string(REGEX REPLACE ^${ruby_exec_prefix} ${CMAKE_INSTALL_PREFIX} ruby_install_dir "${RUBY_SITEARCH_DIR}")
       endif (RUBY_PREFIX)
       add_custom_target(bindings_ruby ALL
-        COMMAND ${RUBY_EXECUTABLE} ${openbabel_SOURCE_DIR}/scripts/ruby/extconf.rb --with-openbabel-lib=${openbabel_BINARY_DIR}/lib${LIB_SUFFIX} --with-openbabel-include=${openbabel_BINARY_DIR}/include
+	COMMAND ${RUBY_EXECUTABLE} ${openbabel_SOURCE_DIR}/scripts/ruby/extconf.rb --with-openbabel-lib=${openbabel_BINARY_DIR}/lib${LIB_SUFFIX} --with-openbabel-include=${openbabel_BINARY_DIR}/include --with-opt-include=${openbabel_SOURCE_DIR}/include
         COMMAND ${CMAKE_COMMAND} -E echo "Compiling Ruby bindings"
         COMMAND make
         DEPENDS ${openbabel_SOURCE_DIR}/scripts/ruby/openbabel-ruby.cpp
